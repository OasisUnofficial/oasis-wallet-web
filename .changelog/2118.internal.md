Refactor how extension requests ledger access (don't rely on state sync)
